# Tilfeldige Ord (Norwegian Random Word Generator)
Tilfeldige Ord is a simple static website built with Astro that generates random Norwegian compound words by combining two words from a dictionary of 905 Norwegian nouns. The site is deployed to tilfeldigeord.no.

Always reference these instructions first and fallback to search or bash commands only when you encounter unexpected information that does not match the info here.

## Working Effectively
- Bootstrap and build the repository:
  - `npm install` -- takes 2-25 seconds depending on network. Set timeout to 60 seconds.
  - `npm run build` -- takes under 2 seconds. NEVER CANCEL. Set timeout to 30 seconds minimum.
- Test the application:
  - `npm test` -- runs unit tests for word utilities using Vitest
  - `npm run dev` -- starts development server on http://localhost:4321/. Set timeout to 30 seconds.
  - `npm run watch` -- alias for dev command. Set timeout to 30 seconds.
- Node.js 18+ is recommended (see .nvmrc file).

## Validation
- Always manually validate functionality after making changes by:
  1. Running `npm run dev` and navigating to http://localhost:4321/
  2. Testing the main random word generator by clicking "Nytt ord" button multiple times
  3. Verifying navigation works between all three pages: "/" (random words), "/alle/" (all words), "/statistikk/" (statistics)
  4. Confirming statistics page shows correct counts (905 words, 818,120 combinations)
- ALWAYS run through at least one complete end-to-end scenario after making changes.
- Test word generation functionality by refreshing the page and clicking "Nytt ord" several times to ensure different combinations appear.
- Verify that the "Alle ord" page displays the complete list of 905 Norwegian words.
- Check that statistics calculations are correct on the "/statistikk/" page.

## Build and Development Commands
All builds are fast (under 2 seconds). NEVER CANCEL build commands.

- `npm install` -- Install dependencies (2-25 seconds depending on network)
- `npm run build` -- Build static site to dist/ directory (~1 second)
- `npm run dev` -- Build and serve on http://localhost:4321/ with live reload
- `npm run start` -- Alias for dev
- `npm run preview` -- Preview built site locally
- `npm run watch` -- Alias for dev
- `npm test` -- Run unit tests with Vitest
- `npm run test:watch` -- Run tests in watch mode
- `npm run test:ui` -- Run tests with UI interface

## Testing
- Unit tests are written using Vitest and cover the word utility functions
- Tests are located in the `test/` directory
- Run `npm test` to execute all tests
- Tests validate word generation logic, array shuffling, capitalization, and HTML generation
- GitHub Actions CI runs tests automatically on every push and pull request

## Common Validation Scenarios
After making any changes, always test these scenarios manually:

### Basic Functionality Test
1. Start server: `npm run dev`
2. Open http://localhost:4321/
3. Verify a random compound word appears (e.g., "Spadetater", "Kakkerlakknerve")
4. Click "Nytt ord" button 3-5 times to ensure different words generate
5. Test navigation: click "Alle ord" and "Statistikk" links
6. Verify statistics show 905 words and 818,120 combinations

### Content Validation
- The site content is in Norwegian but source code and comments are in English
- All 905 Norwegian nouns are stored in src/data/nouns.yaml (YAML format)
- Random words are generated by combining exactly 2 words and capitalizing the result
- Word generation logic is extracted to TypeScript utilities with unit tests

### File Change Validation
- If you modify nouns.yaml, verify word count updates on statistics page
- If you modify templates, verify changes appear after rebuild
- If you modify word utilities, run tests to ensure functionality is preserved
- Always run both `npm test` and `npm run build` after making code changes

## Repository Structure
- `src/` -- Source files
  - `lib/` -- Utility libraries
    - `nouns.ts` -- YAML data loader for Norwegian nouns
    - `word-utils.ts` -- TypeScript utilities for word generation and array manipulation
  - `layouts/` -- Astro layout components
    - `Layout.astro` -- Base HTML layout
  - `pages/` -- Astro page components (index.astro, alle.astro, statistikk.astro)
  - `static/` -- CSS and images (copied to build output)
  - `data/nouns.yaml` -- 905 Norwegian nouns in YAML format
- `test/` -- Unit tests using Vitest
- `dist/` -- Build output (generated, do not edit)
- `astro.config.mjs` -- Astro configuration
- `vitest.config.ts` -- Test configuration
- `package.json` -- Dependencies and scripts

## Key Files to Know
- `src/data/nouns.yaml` -- The complete dictionary of Norwegian words (YAML format)
- `src/lib/word-utils.ts` -- TypeScript utilities for word generation with proper types
- `src/pages/index.astro` -- Main page with random word display
- `test/word-utils.test.ts` -- Unit tests for word generation logic
- `astro.config.mjs` -- Astro static site configuration

## Astro Configuration
The site uses Astro 5.x with:
- Static site generation (SSG) output
- TypeScript support with proper type checking
- YAML data loading for the word dictionary
- Component-based architecture with .astro files
- Client-side JavaScript for interactive word generation

## Development Notes
- Linting tools may be added as needed (no ESLint/Prettier currently configured)
- Unit testing framework: Vitest with comprehensive test coverage
- GitHub Actions CI/CD workflow runs tests and builds on every push/PR
- Minimal dependencies focused on Astro and testing tools
- Site is optimized for simplicity and fast builds
- Word generation logic is properly typed and tested

## Manual Testing Outputs
Expected behavior when testing:
- Main page: Shows random Norwegian compound word as <h1>
- "Nytt ord" click: Generates new compound word instantly
- "Alle ord" page: Lists all 905 words in a bulleted list
- "Statistikk" page: Table showing "Antall ord: 905" and "Antall mulige kombinasjoner: 818120"
- Navigation: All three navigation links work between pages
- Footer: Links to GitHub repository at https://github.com/cruftlab/tilfeldigeord.no/

## Common Commands Output Reference
```bash
# npm install (varies by network speed)
added 345 packages, and audited 345 packages in 60s
155 packages are looking for funding

# npm test
 ✓ test/word-utils.test.ts (21 tests) 10ms
 Test Files  1 passed (1)
      Tests  21 passed (21)

# npm run build  
20:37:15 [build] output: "static"
20:37:15 [build] mode: "static"
20:37:15 [build] ✓ Completed in 114ms.
20:37:16 [build] 3 page(s) built in 877ms

# npm run dev
20:37:15 [astro] Server at http://localhost:4321/

# Directory structure after build
dist/
├── alle/index.html
├── index.html
├── statistikk/index.html
├── _astro/ (generated assets)
└── static/ (CSS, images)
```# Tilfeldige Ord (Norwegian Random Word Generator)
Tilfeldige Ord is a simple static website built with Eleventy that generates random Norwegian compound words by combining two words from a dictionary of 905 Norwegian nouns. The site is deployed to tilfeldigeord.no.

Always reference these instructions first and fallback to search or bash commands only when you encounter unexpected information that does not match the info here.

## Working Effectively
- Bootstrap and build the repository:
  - `npm install` -- takes 2-25 seconds depending on network. Set timeout to 60 seconds.
  - `npm run build` -- takes under 1 second. NEVER CANCEL. Set timeout to 30 seconds minimum.
- Test the application:
  - `npm run serve` -- starts development server on http://localhost:8081/. Set timeout to 30 seconds.
  - `npm run watch` -- builds and watches for changes. Set timeout to 30 seconds.
- There are NO automated tests (`npm test` exits with error). All validation must be manual.
- Node.js 18 is recommended (see .nvmrc file).

## Validation
- Always manually validate functionality after making changes by:
  1. Running `npm run serve` and navigating to http://localhost:8081/
  2. Testing the main random word generator by clicking "Nytt ord" button multiple times
  3. Verifying navigation works between all three pages: "/" (random words), "/alle/" (all words), "/statistikk/" (statistics)
  4. Confirming statistics page shows correct counts (905 words, 818,120 combinations)
- ALWAYS run through at least one complete end-to-end scenario after making changes.
- Test word generation functionality by refreshing the page and clicking "Nytt ord" several times to ensure different combinations appear.
- Verify that the "Alle ord" page displays the complete list of 905 Norwegian words.
- Check that statistics calculations are correct on the "/statistikk/" page.

## Build and Development Commands
All builds are extremely fast (under 1 second). NEVER CANCEL build commands.

- `npm install` -- Install dependencies (2-25 seconds depending on network)
- `npm run build` -- Build static site to dist/ directory (0.1 seconds)
- `npm run serve` -- Build and serve on http://localhost:8081/ with live reload
- `npm run watch` -- Build and watch for file changes (no server)
- `npm run start` -- Alias for serve
- `npm run debug` -- Build with DEBUG=* environment variable

## Common Validation Scenarios
After making any changes, always test these scenarios manually:

### Basic Functionality Test
1. Start server: `npm run serve`
2. Open http://localhost:8081/
3. Verify a random compound word appears (e.g., "Spadetater", "Kakkerlakknerve")
4. Click "Nytt ord" button 3-5 times to ensure different words generate
5. Test navigation: click "Alle ord" and "Statistikk" links
6. Verify statistics show 905 words and 818,120 combinations

### Content Validation
- The site content is in Norwegian but source code and comments are in English
- All 905 Norwegian nouns are stored in src/data/nouns.json
- Random words are generated by combining exactly 2 words and capitalizing the result

### File Change Validation
- If you modify nouns.json, verify word count updates on statistics page
- If you modify templates, verify changes appear after rebuild
- If you modify JavaScript in app.njk, verify functionality still works

## Repository Structure
- `src/` -- Source files
  - `app.njk` -- Generates JavaScript file with word data and logic
  - `data/nouns.json` -- 905 Norwegian nouns (one per line in JSON array)
  - `layouts/base.njk` -- Base HTML template
  - `pages/` -- Page templates (index.njk, all.njk, stats.njk)
  - `static/` -- CSS and images
- `dist/` -- Build output (generated, do not edit)
- `.eleventy.js` -- Eleventy configuration
- `package.json` -- Dependencies and scripts

## Key Files to Know
- `src/data/nouns.json` -- The complete dictionary of Norwegian words
- `src/app.njk` -- Contains the word combination logic and array shuffling
- `src/pages/index.njk` -- Main page with random word display
- `.eleventy.js` -- Build configuration with custom filters

## Eleventy Configuration
The site uses Eleventy 3.0.0 with:
- Nunjucks templating engine
- Custom filters: count, combinations, quote, sortedByPriority
- Input: src/, Output: dist/
- Static files copied from src/static/ and src/public/

## Development Notes
- No linting tools configured (no ESLint, Prettier, etc.)
- No testing framework configured
- No CI/CD workflows exist
- Very minimal dependencies (only @11ty/eleventy)
- Site is optimized for simplicity and fast builds
- All functionality relies on client-side JavaScript for word generation

## Manual Testing Outputs
Expected behavior when testing:
- Main page: Shows random Norwegian compound word as <h1>
- "Nytt ord" click: Generates new compound word instantly
- "Alle ord" page: Lists all 905 words in a bulleted list
- "Statistikk" page: Table showing "Antall ord: 905" and "Antall mulige kombinasjoner: 818120"
- Navigation: All three navigation links work between pages
- Footer: Links to GitHub repository at https://github.com/cruftlab/tilfeldigeord.no/

## Common Commands Output Reference
```bash
# npm install (varies by network speed)
added 189 packages, and audited 190 packages in 2s
45 packages are looking for funding

# npm run build  
[11ty] Writing ./dist/static/app.js from ./src/app.njk
[11ty] Writing ./dist/alle/index.html from ./src/pages/all.njk
[11ty] Writing ./dist/index.html from ./src/pages/index.njk
[11ty] Writing ./dist/statistikk/index.html from ./src/pages/stats.njk
[11ty] Copied 7 Wrote 4 files in 0.10 seconds (v3.0.0)

# npm run serve
[11ty] Server at http://localhost:8081/
[11ty] Watching…

# Directory structure after build
dist/
├── alle/index.html
├── index.html
├── statistikk/index.html
├── static/app.js
├── static/style.css
└── static/images/
```