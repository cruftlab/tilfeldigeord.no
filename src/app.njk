---
permalink: /static/app.js
eleventyExcludeFromCollections: true
---
var nouns = [{{ nouns | quote | safe }}];

// Shuffle an array
// Stolen from https://stackoverflow.com/a/6274381
Object.defineProperty(Array.prototype, 'shuffle', {
    value: function() {
        for (let i = this.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [this[i], this[j]] = [this[j], this[i]];
        }
        return this;
    }
});

// Capitalize first letter
// Stolen from https://stackoverflow.com/a/3291856
String.prototype.capitalize = function() {
    return this.charAt(0).toUpperCase() + this.slice(1);
} 

// Remove tripple repeated letters, for example "arr" + "ruke" should be "arruke"
String.prototype.removeTriplets = function() {
  let result = "";

  for(let i=0; i < this.length; ++i) {
    const current = this[i];
    const isTriplet = this[i+1] === current && this[i+2] === current;
    if(!isTriplet) {
      result += current;
    }
  }
  
  return result;
}

// Get n random words from list
function getRandomWords(n) {
  return nouns
    .shuffle()
    .slice(0, n);
};

// Get n random words as unordered list
// TODO: Link to each word
function getRandomWordAsList(n) {
  var word = getRandomWords(n)
    .join("")
    .removeTriplets()
    .capitalize();
  return `<ul><li>${word}</li></ul>`;
};

function updatePageWithRandomWord() {
  document.getElementById("randomWord").innerHTML = getRandomWordAsList(2);
};

// Update random words when page loads
document.addEventListener("DOMContentLoaded", updatePageWithRandomWord);
